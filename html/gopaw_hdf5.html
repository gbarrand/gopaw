<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&lt;h2&gt;Read a g4tools HDF5 file&lt;/h2&gt;</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.8.14 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><h2>Read a g4tools HDF5 file</h2>
</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><br />
 After installation of a binary kit, you start gopaw with:</p>
<pre class="fragment">    UNIX&gt; &lt;install_path&gt;/gopaw/&lt;version&gt;/bin/gopaw  # UNIX here is for Linux and macOS.
 on Windows:
     DOS&gt; &lt;install_path&gt;\gopaw\&lt;version&gt;\bin\gopaw.exe
</pre><p> Note that on Windows you must run from a DOS prompt (CMD.exe), it does not work from a cygwin prompt.</p>
<p>A distribution comes with examples to play with under the res/gopaw/examples directory. The below instructions are based on data files (for example data_B4.hdf5) found under this directory. The best is to have a local copy of this directory and work on that. </p><pre class="fragment">    UNIX&gt; cp -R &lt;install_path&gt;/gopaw/&lt;version&gt;/res/gopaw/examples .
 on Windows:
     DOS&gt; xcopy /s /q /i &lt;install_path&gt;\gopaw\&lt;version&gt;\res\gopaw\examples examples
</pre><h1><a class="anchor" id="gopaw_hdf5_histos"></a>
Read and plot an histogram</h1>
<p>To see histograms in an HDF5 file produced by Geant4/g4tools: </p><pre class="fragment">    UNIX&gt; cd examples/gopaw  # in this directory there is a data_B4.hdf5 file coming from the Geant4 B4 example.
 on Windows:
     DOS&gt; cd examples\gopaw
 start gopaw:
      OS&gt; &lt;start gopaw&gt; 
</pre><p> and from the gopaw prompt: </p><pre class="fragment">    GOPAW&gt; h/file 1 data_B4.hdf5    | open an HDF5 file and attach it to unit 1.
    GOPAW&gt; ldir                     | list objects in the file.
    directory : "default_histograms".
      object : "Eabs", class : "tools::histo::h1d".
      object : "Egap", class : "tools::histo::h1d".
      object : "Labs", class : "tools::histo::h1d".
      object : "Lgap", class : "tools::histo::h1d".
    directory : "default_ntuples".
      class : "tools::hdf5::store", name : "B4".
    GOPAW&gt; cd //lun1/default_histograms
    GOPAW&gt; h/plot Eabs    | plot the histogram Eabs found in the default_histograms directory.
    GOPAW&gt; close 1
</pre> <div class="image">
<img src="Egap.png" alt="Egap.png"/>
</div>
<h1><a class="anchor" id="gopaw_hdf5_ntuples"></a>
Work on an ntuple</h1>
<p>To do a ntuple projection on an ntuple found in the data_B4.hdf5 file: </p><pre class="fragment">    GOPAW&gt; h/file 1 data_B4.hdf5
    GOPAW&gt; /f/units
     +----+------------------+-----------+
     | Lu | File name        | File type |
     +----+------------------+-----------+
     | 1  | data_B4.hdf5     | HDF5_FILE |
     +----+------------------+-----------+
    GOPAW&gt; ldir
    ...
    GOPAW&gt; cd //lun1/default_ntuples
    GOPAW&gt; n/print B4
    ********************************************************
    * NTUPLE NAME= B4 ENTRIES= 1000 TITLE= 
    ********************************************************
    *  Var numb  *   Name    *    Lower     *    Upper     *
    ********************************************************
    *     1      * Eabs      * 1.80103      * 32.4403      *
    *     2      * Egap      * 0            * 16.2602      *
    *     3      * Labs      * 7.99212      * 171.515      *
    *     4      * Lgap      * 0            * 82.1058      *
    ********************************************************
    GOPAW&gt; n/plot rg_rbw.rgauss
    GOPAW&gt; zone 2 2
    GOPAW&gt; exec root_def  | CERN-ROOT style.
    GOPAW&gt; n/plot B4.Eabs
    GOPAW&gt; n/plot B4.Labs
    GOPAW&gt; n/plot B4.Eabs%Labs
</pre> <div class="image">
<img src="B4_ntuple.png" alt="B4_ntuple.png"/>
</div>
 <pre class="fragment">    GOPAW&gt; close 1
    GOPAW&gt; quit
      Exiting from gopaw.
</pre><p>You can have a look at the B4.kumac file: </p><pre class="fragment">macro B4
* Copyright (C) 2018, Guy Barrand. All rights reserved.
* See the file gopaw.license for terms.
exec alldef
zone 2 3
opt stat
*////////////////////////////////////////
*////////////////////////////////////////
*////////////////////////////////////////
h/file 1 data_B4.hdf5   | file coming from Geant4.
ldir 
cd //lun1/default_histograms
h/plot Eabs
h/plot Egap
h/plot Labs
h/plot Lgap
close 1
*////////////////////////////////////////
*/// ntuple : ///////////////////////////
*////////////////////////////////////////
h/file 1 data_B4.hdf5
ldir //
ldir
cd //lun1/default_ntuples
n/print B4
n/plot B4.Eabs%Labs
n/plot B4.Egap%Lgap
close 1
*////////////////////////////////////////
*////////////////////////////////////////
*////////////////////////////////////////
return

</pre><p> and execute it: </p><pre class="fragment">    GOPAW&gt; exec B4
</pre> <div class="image">
<img src="out_gopaw_B4.png" alt="out_gopaw_B4.png"/>
</div>
<p> Note that you may have done also : </p><pre class="fragment">    UNIX&gt; &lt;install_path&gt;/gopaw/&lt;version&gt;/bin/gopaw B4.kumac
 on Windows:
     DOS&gt; &lt;install_path&gt;\gopaw\&lt;version&gt;\bin\gopaw.exe B4.kumac
</pre> </div></div><!-- contents -->

</body>
</html>
